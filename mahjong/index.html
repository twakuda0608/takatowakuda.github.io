<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>麻雀ツール（統合版）</title>
  <style>
    :root { --max: 480px; }
    body{font-family: system-ui,-apple-system,Segoe UI,Roboto,"Hiragino Kaku Gothic ProN","Meiryo",sans-serif; margin: 24px;}
    h1{font-size: 20px;margin:0 0 12px;text-align:center}
    .wrap{max-width: var(--max); margin: 0 auto;}

    fieldset{border:1px solid #ddd;border-radius:12px;padding:16px;margin:12px 0}
    legend{padding:0 6px}
    label{font-size:14px;color:#333;display:block;margin-bottom:8px}
    input, select{width:100%;font-size:18px;padding:10px;border:1px solid #ccc;border-radius:10px;box-sizing:border-box;margin-top:4px}
    input[readonly]{background:#fafafa}
    .note{font-size:12px;color:#666;margin-top:4px}
    .results{display:flex;flex-direction:column;gap:12px;margin-top:8px}
    .card{border:1px solid #e4e4e4;border-radius:12px;padding:12px}
    .rank{font-weight:600;margin-bottom:4px}
    .sumline{font-variant-numeric: tabular-nums}
    .muted{color:#666}
    .footer{font-size:12px;color:#666;margin-top:16px;text-align:center}

    /* タブ */
    .tabs{display:flex;gap:8px;justify-content:center;margin:0 0 12px}
    .tabbtn{padding:8px 14px;border:1px solid #ddd;border-radius:999px;background:#fafafa;font-size:14px;cursor:pointer}
    .tabbtn.active{background:#eef6ff;border-color:#bcd7ff}
    .tab{display:none}
    .tab.active{display:block}

    /* ポイント精算の2列フォーム（名前/ポイントを横並び） */
    .grid2 { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    .grid2 label { margin:0 }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>麻雀ツール（統合版）</h1>

    <div class="tabs">
      <button class="tabbtn active" data-tab="t1">ウマ/オカ 精算</button>
      <button class="tabbtn" data-tab="t2">総合ポイント精算</button>
    </div>

    <!-- タブ1：ウマ/オカ 精算 -->
    <div id="t1" class="tab active">
      <fieldset>
        <legend>設定</legend>
        <label>初期点（例: 250）<input id="init1" type="number" value="250" /></label>
        <label>オカ（点返し、例: 300）<input id="oka1" type="number" value="300" /></label>
        <label>ウマ
          <select id="uma1">
            <option value="510">5-10（ゴットー）</option>
            <option value="1020">10-20（ワンツー）</option>
            <option value="1030" selected>10-30（ワンスリー）</option>
            <option value="2030">20-30（ツースリー）</option>
          </select>
        </label>
        <label>レート
          <select id="rate1">
            <option value="10">10（テンイチ）</option>
            <option value="20">20（テンニ）</option>
            <option value="30" selected>30（テンサン）</option>
            <option value="50">50（テンゴ）</option>
            <option value="100">100（テンピン）</option>
          </select>
        </label>
        <div class="note">※ オカ・点数は「百点単位」で入力してください（31000点→310）。</div>
      </fieldset>

      <fieldset>
        <legend>点数（百点単位で入力）</legend>
        <label>1位（自動計算）<input id="s1_1" type="number" readonly /></label>
        <label>2位<input id="s2_1" type="number" value="300" /></label>
        <label>3位<input id="s3_1" type="number" value="200" /></label>
        <label>4位<input id="s4_1" type="number" value="100" /></label>
        <div class="note">1位は「初期点×4 −（2位+3位+4位）」で自動計算。</div>
      </fieldset>

      <fieldset>
        <legend>計算結果</legend>
        <div class="results">
          <div class="card"><div class="rank">1位</div><div id="r1_1" class="sumline">—</div></div>
          <div class="card"><div class="rank">2位</div><div id="r2_1" class="sumline">—</div></div>
          <div class="card"><div class="rank">3位</div><div id="r3_1" class="sumline">—</div></div>
          <div class="card"><div class="rank">4位</div><div id="r4_1" class="sumline">—</div></div>
        </div>
        <div class="footer muted">出目（pt）の合計は常に0になります。</div>
      </fieldset>
    </div>

    <!-- タブ2：総合ポイント精算 -->
    <div id="t2" class="tab">
      <fieldset>
        <legend>設定</legend>
        <label>レート
          <select id="rate2">
            <option value="10">10（テンイチ）</option>
            <option value="20">20（テンニ）</option>
            <option value="30" selected>30（テンサン）</option>
            <option value="50">50（テンゴ）</option>
            <option value="100">100（テンピン）</option>
          </select>
        </label>
      </fieldset>

      <fieldset>
        <legend>プレイヤーの総合ポイント</legend>
        <div class="grid2">
          <label>名前1 <input id="n1_2" placeholder="1" /><input id="p1_2" type="number" value="0" /></label>
          <label>名前2 <input id="n2_2" placeholder="2" /><input id="p2_2" type="number" value="0" /></label>
          <label>名前3 <input id="n3_2" placeholder="3" /><input id="p3_2" type="number" value="0" /></label>
          <label>名前4 <input id="n4_2" placeholder="4" /><input id="p4_2" type="number" value="0" /></label>
        </div>
        <div class="note">※ ポイント合計は ±0 にしてください。合計が0以外の時は結果を表示しません。</div>
      </fieldset>

      <fieldset>
        <legend>精算結果</legend>
        <ul id="resultList2"></ul>
        <div id="check2" class="note"></div>
      </fieldset>
    </div>
  </div>

  <!-- JS は defer で遅延読込（DOM構築後に実行） -->
  <script src="./app.js" defer></script>
</body>
</html>
